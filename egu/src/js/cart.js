"use strict";$(function(){($(".qbsp").click(function(){$(".nav_left").fadeToggle()}),$(".nav_left").on("mouseover","li",function(){$(".nav_right_01").css("display","none"),$(".nav_right_01").eq($(this).index()).css("display","block")}),$(".sort").on("mouseout","li",function(){$(".nav_right_01").css("display","none")}),$.cookie("user"))&&($.cookie("user").split("=")[0]&&(!function(){if($.cookie("user")){var t=$.cookie("user").split("=");$.ajax({type:"post",url:"../api/egu-pd/cart.php",async:!0,data:{usname:t[0],page:1,qty:15},success:function(t){!function(t){var e=JSON.parse(t);console.log(e);var n=e.list.map(function(t){return'<li data-id="'+t.pxu+'"">\n            <div class="cart_x">\n                <input type="checkbox" >\n            </div>\n            <div class="cart-nr-li">\n                <div class="cart_img">\n                    <img src="'+t.image+'" alt="">\n                </div>\n                <div class="cart_wz">\n                    <a href="#####" class="btld">'+t.title+'</a>\n                </div>\n            </div>\n            <div class="li-price red">\n                ￥'+t.price+'\n            </div>\n            <div class="cart-li-num">\n                <em class="reduce">-</em>\n                <input type="text" class="tolNum" value="'+t.number+'">\n\n                <em class="adds">+</em>\n            </div>\n            <div class="li-sub red">￥'+t.total+'</div>\n            <div class="li-w">'+t.weight+'g</div>\n            <div class="operation">\n                <span class="yrsc">移入收藏</span>\n                <span class="dele1">删除</span>\n            </div>\n\n        </li> '}).join("");$(".my_goods").html(n);var c=e.total;$(".text-red").text(c);var i=c/e.qty;$(".page-total").text(i)}(t)}})}}(),$(".kct").empty()));function e(t){var e=t.parent().find("input").val(),n=t.parent().prev().text(),c=(e*(n=(n=$.trim(n)).substring(1))).toFixed(2);t.parent().next().html("￥"+c),i()}$(".my_goods").on("click",".adds",function(){var t=$(this).prev().val();100<=++t&&(t=100),$(this).prev().val(t),e($(this))}),$(".my_goods").on("click",".reduce",function(){var t=$(this).next().val();--t<=1&&(t=1),$(this).next().val(t),e($(this))}),$(".my_goods").on("click",".dele1",function(){confirm("确认删除该商品？")&&$(this).parent().parent().remove();var t=$(this).parents("li").attr("data-id"),e=$.cookie("user").split("=");console.log(t),$.ajax({type:"post",url:"../api/egu-pd/cart_-del.php",async:!0,data:{usname:e[0],pxu:t},success:function(t){}}),0==$(".reduce").size()&&($(".kct1").append('<img src="../img/cart/cart_k.png" alt="" width="50">'),$(".kcms").text("你的购物车空空的，赶紧选购吧！"),$(".every_g").css("display","none")),i()}),$(".my_goods").on("click",".yrsc",function(){$(".mycart").remove(),$("body").prepend("<div class='mycart'>收藏成功！！</div>"),$(".mycart").fadeIn(2e3).fadeOut(2e3)});var t=!0;$(".cart-checkbox-zj").on("click",function(){t?($(".cart-checkbox-zj").prop("checked","checked"),$(".cart_x input").prop("checked","checked")):($(".cart-checkbox-zj").removeAttr("checked"),$(".cart_x input").removeAttr("checked")),t=!t,i()}),$(".my_goods").on("click",".cart_x input",function(){i()});var a=[];function i(){a.length=0;for(var t=$(".cart_x input").size(),e=0;e<t;e++)$(".cart_x input").eq(e).prop("checked")&&a.push(e);var n=0,c=0;for(e=0;e<a.length;e++){n+=1*$(".tolNum").eq(a[e]).val();var i=$(".li-sub").eq(a[e]).text();c+=i=1*(i=$.trim(i)).substring(1)}$(".gmzs").text(n),$(".syzj").html("￥"+c.toFixed(2)),$(".cart-nr-zj-js").html("￥"+c.toFixed(2))}$(".my_goods").on("blur",".tolNum",function(){e($(this)),i()}),window.onscroll=function(){var t=window.scrollY,e=document.getElementById("head");150<t?e.classList.add("head_fixe"):e.className="head"}});